name: starsector
no-autogen: true
buildsystem: simple
sources:
  - type: archive
    url: https://f005.backblazeb2.com/file/fractalsoftworks/release/starsector_linux-0.98a-RC8.zip
    sha256: 84672163d6c9b04c1f7ff886342f787a40dd1515cff2ce172d67bd23fa26e193
  - type: file
    path: startup_starsector.sh
  - type: file
    path: com.fractalsoftworks.Starsector.desktop
  - type: file
    path: com.fractalsoftworks.Starsector.png
build-commands:
  - install startup_starsector.sh /app/
  - mkdir -p /app/share/applications /app/share/icons/hicolor/256x256/apps/
  - install com.fractalsoftworks.Starsector.desktop /app/share/applications/
  - install com.fractalsoftworks.Starsector.png /app/share/icons/hicolor/256x256/apps/
  - rmdir saves && ln -s ~/.var/app/com.fractalsoftworks.Starsector/data/saves saves
  - rmdir mods && ln -s ~/.var/app/com.fractalsoftworks.Starsector/data/mods mods
  - rmdir screenshots && ln -s ~/.var/app/com.fractalsoftworks.Starsector/data/screenshots screenshots
  - ln -s ~/.var/app/com.fractalsoftworks.Starsector/data/logs logs
  - sed -i 's;logs=.;logs=./logs;g' starsector.sh
  - mkdir /app/starsector
  - mv * /app/starsector/
  - cat /app/starsector/starsector.sh
  - mv /app/starsector/data/config/settings.json /app/starsector/data/config/original_settings.json
  - ln -s ~/.var/app/com.fractalsoftworks.Starsector/data/config/settings.json /app/starsector/data/config/settings.json
